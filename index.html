<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ó–∞—è–≤–∫–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É</title>
  <style>
    :root { --bg1:#4facfe; --bg2:#00f2fe; }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      padding: 20px;
      box-sizing: border-box;
    }

    .card {
      background: white;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      width: 100%;
      max-width: 600px;
    }

    h2 {
      margin: 0 0 20px;
      text-align: center;
      font-size: 1.6rem;
    }

    label {
      display: block;
      margin: 15px 0 5px;
      font-weight: 600;
    }

    input, select, textarea, button {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 15px;
      box-sizing: border-box;
    }

    textarea { resize: vertical; min-height: 70px; }

    button {
      background: var(--bg1);
      color: white;
      font-weight: bold;
      margin-top: 15px;
      border: none;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover { background: var(--bg2); }

    .price-box {
      margin-top: 12px;
      font-size: 18px;
      font-weight: bold;
      text-align: center;
      color: #222;
    }

    .slider-wrap { margin: 10px 0 20px; }
    .slider-label {
      text-align: center;
      font-size: 14px;
      color: #444;
      margin-top: 5px;
    }

    input[type=range] {
      width: 100%;
      -webkit-appearance: none;
      height: 8px;
      border-radius: 5px;
      background: #ddd;
      outline: none;
    }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none; appearance: none;
      width: 28px; height: 28px; border-radius: 50%;
      background: var(--bg1);
      cursor: pointer; box-shadow: 0 0 5px rgba(0,0,0,.3);
      transition: .2s;
    }
    input[type=range]::-webkit-slider-thumb:hover { background: var(--bg2); }
    input[type=range]::-moz-range-thumb {
      width: 28px; height: 28px; border-radius: 50%;
      background: var(--bg1);
      cursor: pointer; border: none;
    }

    /* ==== –ú–æ–¥–∞–ª–∫–∞ ==== */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal {
      background: white;
      padding: 25px;
      border-radius: 14px;
      text-align: center;
      max-width: 400px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }
    .modal h3 { margin-top: 0; }
    .promo { font-size: 20px; font-weight: bold; margin: 10px 0; color: var(--bg1); }
    .close-btn {
      margin-top: 15px;
      padding: 10px 20px;
      background: var(--bg1);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .close-btn:hover { background: var(--bg2); }

    .tg-link {
      color: #0088cc;
      text-decoration: none;
      font-weight: bold;
    }
    .tg-link:hover {
      text-decoration: underline;
    }

    /* ==== –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å ==== */
    @media (max-width: 600px) {
      .card { padding: 15px; border-radius: 12px; max-width: 95%; }
      h2 { font-size: 20px; }
      label { font-size: 14px; }
      select, textarea, input, button { font-size: 14px; padding: 10px; }
      .price-box { font-size: 16px; }
    }
  </style>
</head>
<body>
  <div class="card">
    <h2>–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</h2>
    <form id="orderForm">
      <label>–¢–µ–º–∞ —Ä–∞–±–æ—Ç—ã:</label>
      <input type="text" name="subject" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≠–∫–æ–Ω–æ–º–∏–∫–∞ –†–§" required>

      <label>–¢–∏–ø —Ä–∞–±–æ—Ç—ã:</label>
      <select name="type" id="workType" required>
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
        <option value="kursovaya">–ö—É—Ä—Å–æ–≤–∞—è</option>
        <option value="diplom">–î–∏–ø–ª–æ–º</option>
        <option value="prezentaciya">–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è</option>
        <option value="referat">–†–µ—Ñ–µ—Ä–∞—Ç</option>
        <option value="drugoe">–î—Ä—É–≥–æ–µ</option>
      </select>

      <label>–û–±—ä–µ–º:</label>
      <div class="slider-wrap">
        <input type="range" id="pagesRange" name="pages" min="20" max="80" value="40">
        <div class="slider-label" id="pagesLabel">40 —Å—Ç—Ä–∞–Ω–∏—Ü</div>
      </div>

      <label>–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
      <div class="slider-wrap">
        <input type="range" id="daysRange" name="days" min="1" max="14" value="7">
        <div class="slider-label" id="daysLabel">7 –¥–Ω–µ–π</div>
      </div>

      <label>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è:</label>
      <textarea name="details" rows="3" placeholder="–£—Ç–æ—á–Ω–µ–Ω–∏—è..."></textarea>

      <label>–í–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã (Telegram/Email):</label>
      <input type="text" name="contact" placeholder="@username –∏–ª–∏ email" required>

      <div class="price-box" id="priceBox">–¶–µ–Ω–∞: ‚Äî</div>

      <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
    <p id="status"></p>
  </div>

 <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <h3>‚úÖ –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ</h3>
    <p>–í–∞—à –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ —Å–∫–∏–¥–∫—É 10%:</p>
    <div class="promo" id="promoCode">‚Äî</div>

    <p id="discountPrice">–¶–µ–Ω–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π: ‚Äî</p>

    <p>
      –ù–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ Telegram: 
      <a href="https://t.me/DiplomBoss" target="_blank" class="tg-link">@DiplomBoss</a>
    </p>

    <button class="close-btn" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

 <script>
const BOT_TOKEN = "8244708473:AAHJlgF_L4N1LXrHrX7frWjvtL-pMNsDuBM";
const CHAT_ID = 7689410399;

const workType = document.getElementById("workType");
const daysRange = document.getElementById("daysRange");
const daysLabel = document.getElementById("daysLabel");
const pagesRange = document.getElementById("pagesRange");
const pagesLabel = document.getElementById("pagesLabel");
const priceBox = document.getElementById("priceBox");

const modalOverlay = document.getElementById("modalOverlay");
const promoCodeEl = document.getElementById("promoCode");
const discountPriceEl = document.getElementById("discountPrice");

const prices = {
  kursovaya: 1000,
  diplom: 3000,
  prezentaciya: 700,
  referat: 500,
  drugoe: 800
};

function updatePagesSlider() {
  if (workType.value === "prezentaciya") {
    pagesRange.min = 5;
    pagesRange.max = 20;
    if (pagesRange.value > 20) pagesRange.value = 10;
    pagesLabel.textContent = pagesRange.value + " —Å–ª–∞–π–¥–æ–≤";
  } else {
    pagesRange.min = 20;
    pagesRange.max = 80;
    if (pagesRange.value < 20) pagesRange.value = 40;
    pagesLabel.textContent = pagesRange.value + " —Å—Ç—Ä–∞–Ω–∏—Ü";
  }
  calcPrice();
}

function calcPrice() {
  const type = workType.value;
  const days = +daysRange.value;
  const pages = +pagesRange.value;

  daysLabel.textContent = days + " –¥–Ω–µ–π";
  pagesLabel.textContent = 
    type === "prezentaciya" ? pages + " —Å–ª–∞–π–¥–æ–≤" : pages + " —Å—Ç—Ä–∞–Ω–∏—Ü";

  if (!type) { priceBox.textContent = "–¶–µ–Ω–∞: ‚Äî"; return; }

  let base = prices[type];
  let coefPages = (type === "prezentaciya") ? pages / 10 : pages / 40;
  let coefDays = 1 + (14 - days) * 0.1;
  let total = Math.round(base * coefPages * coefDays);

  priceBox.textContent = "–¶–µ–Ω–∞: " + total + " ‚ÇΩ";
  return total;
}

workType.addEventListener("change", updatePagesSlider);
daysRange.addEventListener("input", calcPrice);
pagesRange.addEventListener("input", calcPrice);

const form = document.getElementById("orderForm");
const status = document.getElementById("status");

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  const formData = new FormData(form);
  const totalPrice = calcPrice();
  const discounted = totalPrice ? Math.round(totalPrice * 0.9) : 0;

  const text = 
    `üìå –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞\n` +
    `–¢–µ–º–∞: ${formData.get("subject")}\n` +
    `–¢–∏–ø —Ä–∞–±–æ—Ç—ã: ${formData.get("type")}\n` +
    `–û–±—ä–µ–º: ${formData.get("pages")} ${workType.value === "prezentaciya" ? "—Å–ª–∞–π–¥–æ–≤" : "—Å—Ç—Ä."}\n` +
    `–°—Ä–æ–∫: ${formData.get("days")} –¥–Ω–µ–π\n` +
    `–ü–æ–∂–µ–ª–∞–Ω–∏—è: ${formData.get("details") || "‚Äî"}\n` +
    `–ö–æ–Ω—Ç–∞–∫—Ç—ã: ${formData.get("contact")}\n` +
    `üí∞ –ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞: ${totalPrice || "‚Äî"} ‚ÇΩ`;

  try {
    const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ chat_id: CHAT_ID, text })
    });

    const data = await response.json();
    if (data.ok) {
      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞
      const code = Math.random().toString(36).substring(2, 12).toUpperCase();
      promoCodeEl.textContent = code;

      // –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ä—É—é –∏ –Ω–æ–≤—É—é —Ü–µ–Ω—É
      discountPriceEl.innerHTML = 
        `<span style="text-decoration:line-through; color:#888; font-size:16px;">${totalPrice} ‚ÇΩ</span> 
         <span style="color:green; font-weight:bold; font-size:20px; margin-left:8px;">${discounted} ‚ÇΩ</span>`;

      // –ø–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª–∫—É
      modalOverlay.style.display = "flex";

      // –°—Ñ–æ—Ä–º–∏—Ä—É–µ–º –≤—Ç–æ—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      const detailsMessage = 
`üì© –ù–æ–≤—ã–π –∑–∞–∫–∞–∑
üë§ –ö–æ–Ω—Ç–∞–∫—Ç—ã: ${form.contact.value}
üìÑ –¢–∏–ø —Ä–∞–±–æ—Ç—ã: ${form.type.value}
üìë –û–±—ä–µ–º: ${pagesRange.value} —Å—Ç—Ä.
‚è≥ –°—Ä–æ–∫: ${daysRange.value} –¥–Ω.
üí¨ –ü–æ–∂–µ–ª–∞–Ω–∏—è: ${form.details.value || "‚Äî"}
üéüÔ∏è –ü—Ä–æ–º–æ–∫–æ–¥: ${code}
üí∞ –¶–µ–Ω–∞ –±–µ–∑ —Å–∫–∏–¥–∫–∏: ${totalPrice} ‚ÇΩ
üí∞ –¶–µ–Ω–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π: ${discounted} ‚ÇΩ`;

      // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤—Ç–æ—Ä–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
      await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: detailsMessage
        })
      });

      // –æ—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
      form.reset();
      priceBox.textContent = "–¶–µ–Ω–∞: ‚Äî";
      daysLabel.textContent = "7 –¥–Ω–µ–π";
      daysRange.value = 7;
      pagesLabel.textContent = "40 —Å—Ç—Ä–∞–Ω–∏—Ü";
      pagesRange.value = 40;
    } else {
      status.innerText = "‚ùå –û—à–∏–±–∫–∞ Telegram: " + data.description;
    }
  } catch (error) {
    status.innerText = "‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.";
  }
});

function closeModal() {
  modalOverlay.style.display = "none";
}

calcPrice();
</script>
